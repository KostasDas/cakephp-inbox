/*! jQuery-ui-Slider-Pips - v1.10.7 - 2015-08-20
* Copyright (c) 2015 Simon Goellner <simey.me@gmail.com>; Licensed MIT */
;!function(d){var c={pips:function(N){function M(j){var q,p,o,n,m,l=[],k=0;if(y&&y.length){for(o=D.element.slider("values"),n=d.map(o,function(b){return Math.abs(b-j)}),m=Math.min.apply(Math,n),q=0;q<n.length;q++){n[q]===m&&l.push(q)}for(k=l[0],p=0;p<l.length;p++){D._lastChangedValue===l[p]&&(k=l[p])}D.options.range&&2===l.length&&(j>o[1]?k=l[1]:j<o[0]&&(k=l[0]))}return k}function L(){D.element.off(".selectPip").on("mousedown.slider",D.element.data("mousedown-original")).removeClass("ui-slider-pips").find(".ui-slider-pip").remove()}function K(f){if(!D.option("disabled")){var h=d(f).data("value"),g=M(h);y&&y.length?D.element.slider("values",g,h):D.element.slider("value",h),D._lastChangedValue=g}}function J(g){var q,p,o=g,n="ui-slider-pip",m="";"first"===g?o=0:"last"===g&&(o=x);var l=B+D.options.step*o,k=l.toString().replace(".","-");if(q="array"===d.type(v.labels)?v.labels[o]||"":"object"===d.type(v.labels)?"first"===g?v.labels.first||"":"last"===g?v.labels.last||"":"array"===d.type(v.labels.rest)?v.labels.rest[o-1]||"":l:l,"first"===g?(p="0%",n+=" ui-slider-pip-first",n+="label"===v.first?" ui-slider-pip-label":"",n+=!1===v.first?" ui-slider-pip-hide":""):"last"===g?(p="100%",n+=" ui-slider-pip-last",n+="label"===v.last?" ui-slider-pip-label":"",n+=!1===v.last?" ui-slider-pip-hide":""):(p=(100/x*g).toFixed(4)+"%",n+="label"===v.rest?" ui-slider-pip-label":"",n+=!1===v.rest?" ui-slider-pip-hide":""),n+=" ui-slider-pip-"+k,y&&y.length){for(I=0;I<y.length;I++){l===y[I]&&(n+=" ui-slider-pip-initial-"+(I+1),n+=" ui-slider-pip-selected-"+(I+1))}D.options.range&&l>y[0]&&l<y[1]&&(n+=" ui-slider-pip-inrange")}else{l===z&&(n+=" ui-slider-pip-initial",n+=" ui-slider-pip-selected"),D.options.range&&("min"===D.options.range&&z>l||"max"===D.options.range&&l>z)&&(n+=" ui-slider-pip-inrange")}return m="horizontal"===D.options.orientation?"left: "+p:"bottom: "+p,'<span class="'+n+'" style="'+m+'"><span class="ui-slider-line"></span><span class="ui-slider-label" data-value="'+l+'">'+v.formatLabel(q)+"</span></span>"}var I,H,G,F,E,D=this,C="",B=D._valueMin(),A=D._valueMax(),z=D._value(),y=D._values(),x=(A-B)/D.options.step,w=D.element.find(".ui-slider-handle"),v={first:"label",last:"label",rest:"pip",labels:!1,prefix:"",suffix:"",step:x>100?Math.floor(0.05*x):1,formatLabel:function(b){return this.prefix+b+this.suffix}};if("object"!==d.type(N)&&"undefined"!==d.type(N)){return void ("destroy"===N&&L())}d.extend(v,N),D.options.pipStep=Math.round(v.step),D.element.off(".selectPip").addClass("ui-slider-pips").find(".ui-slider-pip").remove();var a={single:function(e){this.resetClasses(),E.filter(".ui-slider-pip-"+this.classLabel(e)).addClass("ui-slider-pip-selected"),D.options.range&&E.each(function(g,f){var b=d(f).children(".ui-slider-label").data("value");("min"===D.options.range&&e>b||"max"===D.options.range&&b>e)&&d(f).addClass("ui-slider-pip-inrange")})},range:function(e){for(this.resetClasses(),I=0;I<e.length;I++){E.filter(".ui-slider-pip-"+this.classLabel(e[I])).addClass("ui-slider-pip-selected-"+(I+1))}D.options.range&&E.each(function(g,f){var b=d(f).children(".ui-slider-label").data("value");b>e[0]&&b<e[1]&&d(f).addClass("ui-slider-pip-inrange")})},classLabel:function(b){return b.toString().replace(".","-")},resetClasses:function(){var b=/(^|\s*)(ui-slider-pip-selected|ui-slider-pip-inrange)(-{1,2}\d+|\s|$)/gi;E.removeClass(function(e,f){return(f.match(b)||[]).join(" ")})}};for(C+=J("first"),G=1;x>G;G++){G%D.options.pipStep===0&&(C+=J(G))}for(C+=J("last"),D.element.append(C),E=D.element.find(".ui-slider-pip"),F=d._data(D.element.get(0),"events").mousedown&&d._data(D.element.get(0),"events").mousedown.length?d._data(D.element.get(0),"events").mousedown:D.element.data("mousedown-handlers"),D.element.data("mousedown-handlers",F.slice()),H=0;H<F.length;H++){"slider"===F[H].namespace&&D.element.data("mousedown-original",F[H].handler)}D.element.off("mousedown.slider").on("mousedown.selectPip",function(e){var l=d(e.target),k=M(l.data("value")),j=w.eq(k);if(j.addClass("ui-state-active"),l.is(".ui-slider-label")){K(l),D.element.one("mouseup.selectPip",function(){j.removeClass("ui-state-active").focus()})}else{var i=D.element.data("mousedown-original");i(e)}}),D.element.on("slide.selectPip slidechange.selectPip",function(g,k){var j=d(this),i=j.slider("value"),h=j.slider("values");k&&(i=k.value,h=k.values),h&&h.length?a.range(h):a.single(i)})},"float":function(x){function w(){t.element.off(".sliderFloat").removeClass("ui-slider-float").find(".ui-slider-tip, .ui-slider-tip-label").remove()}function v(e){var g=[],f=d.map(e,function(b){return Math.ceil((b-s)/t.options.step)});if("array"===d.type(a.labels)){for(u=0;u<e.length;u++){g[u]=a.labels[f[u]]||e[u]}}else{if("object"===d.type(a.labels)){for(u=0;u<e.length;u++){g[u]=e[u]===s?a.labels.first||s:e[u]===r?a.labels.last||r:"array"===d.type(a.labels.rest)?a.labels.rest[f[u]-1]||e[u]:e[u]}}else{for(u=0;u<e.length;u++){g[u]=e[u]}}}return g}var u,t=this,s=t._valueMin(),r=t._valueMax(),q=t._value(),p=t._values(),o=[],n=t.element.find(".ui-slider-handle"),a={handle:!0,pips:!1,labels:!1,prefix:"",suffix:"",event:"slidechange slide",formatLabel:function(b){return this.prefix+b+this.suffix}};if("object"!==d.type(x)&&"undefined"!==d.type(x)){return void ("destroy"===x&&w())}if(d.extend(a,x),s>q&&(q=s),q>r&&(q=r),p&&p.length){for(u=0;u<p.length;u++){p[u]<s&&(p[u]=s),p[u]>r&&(p[u]=r)}}if(t.element.addClass("ui-slider-float").find(".ui-slider-tip, .ui-slider-tip-label").remove(),a.handle){for(o=v(p&&p.length?p:[q]),u=0;u<o.length;u++){n.eq(u).append(d('<span class="ui-slider-tip">'+a.formatLabel(o[u])+"</span>"))}}a.pips&&t.element.find(".ui-slider-label").each(function(i,y){var m,l,k=d(y),j=[k.data("value")];m=a.formatLabel(v(j)[0]),l=d('<span class="ui-slider-tip-label">'+m+"</span>").insertAfter(k)}),"slide"!==a.event&&"slidechange"!==a.event&&"slide slidechange"!==a.event&&"slidechange slide"!==a.event&&(a.event="slidechange slide"),t.element.off(".sliderFloat").on(a.event+".sliderFloat",function(g,j){var i="array"===d.type(j.value)?j.value:[j.value],h=a.formatLabel(v(i)[0]);d(j.handle).find(".ui-slider-tip").html(h)})}};d.extend(!0,d.ui.slider.prototype,c)}(jQuery);